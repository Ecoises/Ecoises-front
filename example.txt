ejemplo de contenido de lesiones
import { Play, Pause, Volume2, SkipBack, SkipForward, Clock, Calendar, Tag } from "lucide-react";
import { Button } from "@/components/ui/button";
import { useState } from "react";
import authorAvatar from "@/assets/author-avatar.jpg";
import articleImage from "@/assets/article-frog.jpg";
import { ActivitiesSection } from "@/components/activities/ActivitiesSection";
import { lessonActivitiesData } from "@/data/lessonActivities";

interface ArticleViewProps {
  lessonId?: number;
  onBackToCourse?: () => void;
}

export const ArticleView = ({ lessonId = 1, onBackToCourse }: ArticleViewProps) => {
  const [isPlaying, setIsPlaying] = useState(false);
  const [progress, setProgress] = useState(35);
  
  const lessonActivities = lessonActivitiesData.find(la => la.lessonId === lessonId)?.activities || [];
  return (
    <div className="min-h-screen bg-background">
      {/* Top Navigation */}
      <nav className="sticky top-0 z-50 bg-background/80 backdrop-blur-xl border-b border-border/50">
        <div className="container mx-auto px-6 h-16 flex items-center justify-between">
          <Button variant="ghost" size="sm" className="gap-2" onClick={onBackToCourse}>
            <svg className="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
            </svg>
            Volver al Curso
          </Button>
          <div className="flex items-center gap-3">
            <span className="text-sm text-muted-foreground">Lección 3 de 6</span>
            <div className="flex gap-1">
              {[1, 2, 3, 4, 5, 6].map(i => (
                <div 
                  key={i} 
                  className={`w-8 h-1 rounded-full ${i <= 3 ? 'bg-accent' : 'bg-secondary'}`} 
                />
              ))}
            </div>
          </div>
        </div>
      </nav>

      <div className="container mx-auto px-6 py-12">
        <div className="flex flex-col lg:flex-row gap-12">
          {/* Main Content */}
          <article className="flex-1 max-w-3xl mx-auto lg:mx-0">
            {/* Article Header */}
            <header className="mb-12 animate-fade-in">
              <div className="flex gap-3 mb-6">
                <span className="px-3 py-1 text-xs font-medium bg-primary/80 rounded-full text-primary-foreground">
                  Biodiversidad
                </span>
                <span className="px-3 py-1 text-xs font-medium bg-secondary rounded-full text-secondary-foreground">
                  Anfibios
                </span>
              </div>
              
              <h1 className="font-display text-3xl md:text-4xl lg:text-5xl font-bold text-foreground mb-6 leading-tight">
                Especies Endémicas del Amazonas: Un Viaje por la Diversidad
              </h1>
              
              <p className="text-xl text-muted-foreground leading-relaxed">
                Descubre las especies únicas que habitan exclusivamente en la cuenca amazónica y comprende por qué su conservación es crucial para el equilibrio global.
              </p>
            </header>

            {/* Article Body */}
            <div className="prose-biodiversity animate-slide-up" style={{ animationDelay: "200ms" }}>
              <p>
                La cuenca amazónica alberga aproximadamente el 10% de todas las especies conocidas en el planeta. Esta inmensa biodiversidad incluye miles de especies que no se encuentran en ningún otro lugar de la Tierra: las llamadas especies endémicas.
              </p>

              <p>
                El concepto de endemismo es fundamental para comprender la importancia de conservar hábitats específicos. Una especie endémica es aquella cuya distribución está restringida a un área geográfica particular, ya sea un continente, un país, una isla o incluso un microhábitat.
              </p>

              <h2>Los Anfibios: Joyas del Bosque Húmedo</h2>

              <p>
                Entre las criaturas más fascinantes del Amazonas se encuentran las ranas venenosas de la familia Dendrobatidae. Estos pequeños anfibios, con sus colores vibrantes que van desde el azul eléctrico hasta el naranja intenso, son un ejemplo perfecto de cómo la evolución ha moldeado estrategias de supervivencia únicas.
              </p>

              <img 
                src={articleImage}
                alt="Rana dardo venenoso en su hábitat natural"
              />

              <blockquote>
                "Cada especie que perdemos es como arrancar una página de un libro que nunca podremos volver a leer. La biodiversidad amazónica es nuestra biblioteca viva más valiosa."
                <footer className="mt-2 text-sm not-italic">— Dr. Thomas Lovejoy, Biólogo</footer>
              </blockquote>

              <p>
                Los colores brillantes de estas ranas son un ejemplo de aposematismo: una señal de advertencia para los depredadores que indica su toxicidad. Los pueblos indígenas han utilizado durante siglos las secreciones de estas ranas para envenenar las puntas de sus dardos de caza.
              </p>

              <h2>Mamíferos Únicos del Dosel</h2>

              <p>
                El dosel amazónico —la capa superior del bosque— es hogar de numerosas especies de primates endémicos. El tití león dorado, el mono araña de cara roja y el uakarí calvo son solo algunos ejemplos de primates que dependen exclusivamente de estos ecosistemas.
              </p>

              <p>
                Estos primates juegan roles ecológicos cruciales como dispersores de semillas. Al alimentarse de frutos y desplazarse por el bosque, contribuyen a la regeneración natural del ecosistema, creando un ciclo virtuoso de interdependencia.
              </p>

              <h3>El Desafío de la Conservación</h3>

              <p>
                La deforestación y el cambio climático representan las mayores amenazas para estas especies endémicas. Se estima que el Amazonas ha perdido aproximadamente el 17% de su cobertura forestal en las últimas cinco décadas, poniendo en riesgo a innumerables especies que aún no hemos catalogado.
              </p>

              <p>
                La investigación científica continúa descubriendo nuevas especies cada año, lo que nos recuerda cuánto nos queda por aprender de este ecosistema extraordinario. Proteger el Amazonas no es solo preservar árboles; es salvaguardar millones de años de evolución y las posibles soluciones que estas especies podrían ofrecer a desafíos futuros.
              </p>
            </div>

            {/* Gamified Activities Section */}
            {lessonActivities.length > 0 && (
              <ActivitiesSection 
                activities={lessonActivities}
                lessonTitle="Especies Endémicas del Amazonas"
              />
            )}

            {/* Article Footer */}
            <footer className="mt-16 pt-8 border-t border-border/50">
              <div className="flex items-center justify-between flex-wrap gap-4">
                <Button variant="outline" size="lg">
                  <svg className="w-4 h-4 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                  </svg>
                  Lección Anterior
                </Button>
                <Button variant="hero" size="lg">
                  Siguiente Lección
                  <svg className="w-4 h-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                  </svg>
                </Button>
              </div>
            </footer>
          </article>

          {/* Sticky Sidebar */}
          <aside className="lg:w-80 shrink-0">
            <div className="lg:sticky lg:top-24 space-y-6">
              {/* Author Card */}
              <div className="glass-card p-6 text-center">
                <img 
                  src={authorAvatar}
                  alt="Dra. Elena Martínez"
                  className="w-20 h-20 rounded-full mx-auto mb-4 border-2 border-accent/50 object-cover"
                />
                <h3 className="font-display font-semibold text-foreground mb-1">Dra. Elena Martínez</h3>
                <p className="text-sm text-muted-foreground mb-4">Bióloga y Conservacionista</p>
                <Button variant="outline" size="sm" className="w-full">
                  Ver Perfil
                </Button>
              </div>

              {/* Reading Info */}
              <div className="glass-card p-6 space-y-4">
                <div className="flex items-center gap-3">
                  <Clock className="w-5 h-5 text-accent" />
                  <div>
                    <p className="text-sm text-muted-foreground">Tiempo de lectura</p>
                    <p className="font-medium text-foreground">15 min</p>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <Calendar className="w-5 h-5 text-muted-foreground" />
                  <div>
                    <p className="text-sm text-muted-foreground">Publicado</p>
                    <p className="font-medium text-foreground">20 Dic 2024</p>
                  </div>
                </div>
                <div className="flex items-center gap-3">
                  <Tag className="w-5 h-5 text-muted-foreground" />
                  <div className="flex flex-wrap gap-2">
                    <span className="text-xs px-2 py-1 bg-secondary rounded-full text-secondary-foreground">Ecología</span>
                    <span className="text-xs px-2 py-1 bg-secondary rounded-full text-secondary-foreground">Fauna</span>
                  </div>
                </div>
              </div>

              {/* Audio Player */}
              <div className="glass-card p-6 border-accent/30">
                <div className="flex items-center gap-3 mb-4">
                  <div className="p-2 bg-accent/20 rounded-lg">
                    <Volume2 className="w-5 h-5 text-accent" />
                  </div>
                  <div>
                    <p className="font-medium text-foreground">Escuchar Artículo</p>
                    <p className="text-xs text-muted-foreground">Versión narrada disponible</p>
                  </div>
                </div>

                {/* Progress Bar */}
                <div className="mb-4">
                  <div className="relative h-1.5 bg-secondary rounded-full overflow-hidden cursor-pointer">
                    <div 
                      className="absolute inset-y-0 left-0 bg-accent rounded-full"
                      style={{ width: `${progress}%` }}
                    />
                  </div>
                  <div className="flex justify-between mt-2 text-xs text-muted-foreground">
                    <span>5:15</span>
                    <span>15:00</span>
                  </div>
                </div>

                {/* Controls */}
                <div className="flex items-center justify-center gap-4">
                  <button className="p-2 text-muted-foreground hover:text-foreground transition-colors">
                    <SkipBack className="w-5 h-5" />
                  </button>
                  <button 
                    onClick={() => setIsPlaying(!isPlaying)}
                    className="p-4 bg-accent text-accent-foreground rounded-full hover:shadow-glow-accent transition-all hover:scale-105"
                  >
                    {isPlaying ? <Pause className="w-5 h-5" /> : <Play className="w-5 h-5 ml-0.5" />}
                  </button>
                  <button className="p-2 text-muted-foreground hover:text-foreground transition-colors">
                    <SkipForward className="w-5 h-5" />
                  </button>
                </div>
              </div>
            </div>
          </aside>
        </div>
      </div>
    </div>
  );
};


pagina para actividades 

import { useState } from "react";
import { Activity } from "@/types/activities";
import { QuizMultiple, QuizTrueFalse } from "./QuizActivities";
import { DragDrop } from "./DragDropActivity";
import { Matching } from "./MatchingActivity";
import { RewardModal } from "./RewardModal";
import { Gamepad2, ChevronRight, CheckCircle2 } from "lucide-react";
import { cn } from "@/lib/utils";

interface ActivitiesSectionProps {
  activities: Activity[];
  lessonTitle: string;
}

export const ActivitiesSection = ({ activities, lessonTitle }: ActivitiesSectionProps) => {
  const [currentActivityIndex, setCurrentActivityIndex] = useState(0);
  const [completedActivities, setCompletedActivities] = useState<Set<number>>(new Set());
  const [totalPoints, setTotalPoints] = useState(0);
  const [earnedBadges, setEarnedBadges] = useState<string[]>([]);
  const [showReward, setShowReward] = useState(false);
  const [lastReward, setLastReward] = useState({ points: 0, badge: "" });

  const handleActivityComplete = (index: number, correct: boolean, points: number, badge?: string) => {
    if (correct) {
      setCompletedActivities(prev => new Set([...prev, index]));
      setTotalPoints(prev => prev + points);
      if (badge) {
        setEarnedBadges(prev => [...prev, badge]);
      }
      setLastReward({ points, badge: badge || "" });
      setShowReward(true);
    }
  };

  const handleRewardClose = () => {
    setShowReward(false);
    // Move to next activity if available
    if (currentActivityIndex < activities.length - 1) {
      setCurrentActivityIndex(prev => prev + 1);
    }
  };

  const renderActivity = (activity: Activity, index: number) => {
    switch (activity.type) {
      case "quiz_multiple":
        return (
          <QuizMultiple
            activity={activity}
            onComplete={(correct, points, badge) => handleActivityComplete(index, correct, points, badge)}
          />
        );
      case "quiz_true_false":
        return (
          <QuizTrueFalse
            activity={activity}
            onComplete={(correct, points, badge) => handleActivityComplete(index, correct, points, badge)}
          />
        );
      case "drag_drop":
        return (
          <DragDrop
            activity={activity}
            onComplete={(correct, points, badge) => handleActivityComplete(index, correct, points, badge)}
          />
        );
      case "matching":
        return (
          <Matching
            activity={activity}
            onComplete={(correct, points, badge) => handleActivityComplete(index, correct, points, badge)}
          />
        );
      default:
        return null;
    }
  };

  const currentActivity = activities[currentActivityIndex];

  return (
    <section className="mt-16 pt-8 border-t border-border/50">
      {/* Section Header */}
      <div className="flex items-center gap-4 mb-8">
        <div className="p-3 bg-gradient-to-br from-accent/30 to-accent/10 rounded-2xl">
          <Gamepad2 className="w-6 h-6 text-accent" />
        </div>
        <div>
          <h3 className="font-display text-2xl font-bold text-foreground">
            Actividades de la Lección
          </h3>
          <p className="text-muted-foreground">
            Pon a prueba lo que has aprendido
          </p>
        </div>
      </div>

      {/* Progress & Stats */}
      <div className="glass-card p-4 mb-6">
        <div className="flex flex-wrap items-center justify-between gap-4">
          {/* Activity Progress */}
          <div className="flex items-center gap-3">
            {activities.map((_, index) => (
              <button
                key={index}
                onClick={() => !completedActivities.has(currentActivityIndex) || setCurrentActivityIndex(index)}
                className={cn(
                  "w-10 h-10 rounded-xl flex items-center justify-center font-medium transition-all duration-300",
                  completedActivities.has(index) && "bg-primary/20 text-primary",
                  currentActivityIndex === index && !completedActivities.has(index) && "bg-accent/20 text-accent border-2 border-accent",
                  currentActivityIndex !== index && !completedActivities.has(index) && "bg-secondary text-muted-foreground"
                )}
              >
                {completedActivities.has(index) ? (
                  <CheckCircle2 className="w-5 h-5" />
                ) : (
                  index + 1
                )}
              </button>
            ))}
          </div>

          {/* Stats */}
          <div className="flex items-center gap-4">
            {earnedBadges.length > 0 && (
              <div className="flex items-center gap-1 px-3 py-1.5 bg-accent/10 rounded-full">
                {earnedBadges.map((badge, i) => (
                  <span key={i} className="text-xl">{badge}</span>
                ))}
              </div>
            )}
            <div className="px-4 py-2 bg-primary/10 rounded-full">
              <span className="text-sm font-medium text-primary">{totalPoints} pts</span>
            </div>
          </div>
        </div>
      </div>

      {/* Current Activity */}
      <div className="animate-fade-in" key={currentActivityIndex}>
        {renderActivity(currentActivity, currentActivityIndex)}
      </div>

      {/* Navigation hint */}
      {completedActivities.has(currentActivityIndex) && currentActivityIndex < activities.length - 1 && (
        <div className="mt-4 text-center">
          <button
            onClick={() => setCurrentActivityIndex(prev => prev + 1)}
            className="inline-flex items-center gap-2 text-accent hover:text-accent/80 transition-colors"
          >
            <span>Siguiente actividad</span>
            <ChevronRight className="w-4 h-4" />
          </button>
        </div>
      )}

      {/* Completion Message */}
      {completedActivities.size === activities.length && (
        <div className="mt-8 glass-card p-6 border-primary/30 text-center animate-fade-in">
          <div className="inline-flex items-center justify-center w-16 h-16 bg-primary/20 rounded-full mb-4">
            <CheckCircle2 className="w-8 h-8 text-primary" />
          </div>
          <h4 className="font-display text-xl font-bold text-foreground mb-2">
            ¡Lección Completada!
          </h4>
          <p className="text-muted-foreground mb-4">
            Has completado todas las actividades de esta lección
          </p>
          <div className="flex items-center justify-center gap-6">
            <div className="text-center">
              <p className="text-2xl font-bold text-primary">{totalPoints}</p>
              <p className="text-xs text-muted-foreground">Puntos totales</p>
            </div>
            {earnedBadges.length > 0 && (
              <div className="text-center">
                <div className="flex justify-center gap-1 text-2xl">
                  {earnedBadges.map((badge, i) => (
                    <span key={i}>{badge}</span>
                  ))}
                </div>
                <p className="text-xs text-muted-foreground">Insignias ganadas</p>
              </div>
            )}
          </div>
        </div>
      )}

      {/* Reward Modal */}
      <RewardModal
        isOpen={showReward}
        onClose={handleRewardClose}
        points={lastReward.points}
        badge={lastReward.badge}
        totalPoints={totalPoints}
      />
    </section>
  );
};


import { useState, useCallback } from "react";
import { CheckCircle2, GripVertical, ArrowRight } from "lucide-react";
import { Button } from "@/components/ui/button";
import { DragDropActivity } from "@/types/activities";
import { cn } from "@/lib/utils";

interface DragDropProps {
  activity: DragDropActivity;
  onComplete: (correct: boolean, points: number, badge?: string) => void;
}

export const DragDrop = ({ activity, onComplete }: DragDropProps) => {
  const [items, setItems] = useState(() => 
    [...activity.pairs].sort(() => Math.random() - 0.5).map(p => ({ ...p, placed: false, targetId: "" }))
  );
  const [targets] = useState(() => 
    [...activity.pairs].sort(() => Math.random() - 0.5).map(p => ({ id: p.id, target: p.target, elementId: "" }))
  );
  const [placements, setPlacements] = useState<Record<string, string>>({});
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);
  const [draggedItem, setDraggedItem] = useState<string | null>(null);

  const handleDragStart = (e: React.DragEvent, itemId: string) => {
    e.dataTransfer.setData("text/plain", itemId);
    setDraggedItem(itemId);
  };

  const handleDragEnd = () => {
    setDraggedItem(null);
  };

  const handleDragOver = (e: React.DragEvent) => {
    e.preventDefault();
  };

  const handleDrop = (e: React.DragEvent, targetId: string) => {
    e.preventDefault();
    const itemId = e.dataTransfer.getData("text/plain");
    
    setPlacements(prev => {
      const newPlacements = { ...prev };
      // Remove item from previous target
      Object.keys(newPlacements).forEach(key => {
        if (newPlacements[key] === itemId) {
          delete newPlacements[key];
        }
      });
      // Place in new target
      newPlacements[targetId] = itemId;
      return newPlacements;
    });
    setDraggedItem(null);
  };

  const handleSubmit = () => {
    // Check if all placements are correct
    let allCorrect = true;
    activity.pairs.forEach(pair => {
      const placedItemId = placements[pair.id];
      if (placedItemId !== pair.id) {
        allCorrect = false;
      }
    });

    setIsCorrect(allCorrect);
    setShowResult(true);
    
    if (allCorrect) {
      setTimeout(() => onComplete(true, activity.points, activity.badge), 1500);
    }
  };

  const handleRetry = () => {
    setPlacements({});
    setShowResult(false);
    setIsCorrect(false);
  };

  const getItemById = (id: string) => activity.pairs.find(p => p.id === id);

  const allPlaced = Object.keys(placements).length === activity.pairs.length;

  return (
    <div className="glass-card p-6 space-y-6">
      <div className="flex items-start gap-3">
        <div className="p-2 bg-accent/20 rounded-xl">
          <GripVertical className="w-5 h-5 text-accent" />
        </div>
        <div>
          <span className="text-xs text-muted-foreground uppercase tracking-wide">Arrastrar y Soltar</span>
          <h4 className="font-display font-semibold text-foreground mt-1">{activity.instruction}</h4>
        </div>
      </div>

      <div className="grid md:grid-cols-2 gap-6">
        {/* Items to drag */}
        <div className="space-y-3">
          <p className="text-sm text-muted-foreground font-medium">Elementos:</p>
          <div className="space-y-2">
            {activity.pairs.map((pair) => {
              const isPlaced = Object.values(placements).includes(pair.id);
              return (
                <div
                  key={pair.id}
                  draggable={!showResult && !isPlaced}
                  onDragStart={(e) => handleDragStart(e, pair.id)}
                  onDragEnd={handleDragEnd}
                  className={cn(
                    "p-3 rounded-xl border-2 transition-all duration-300 flex items-center gap-2",
                    !showResult && !isPlaced && "border-border/50 bg-secondary/50 cursor-grab active:cursor-grabbing hover:border-accent/50",
                    !showResult && isPlaced && "border-primary/30 bg-primary/10 opacity-50",
                    showResult && "cursor-default",
                    draggedItem === pair.id && "opacity-50 scale-95"
                  )}
                >
                  <GripVertical className="w-4 h-4 text-muted-foreground" />
                  <span className="text-foreground">{pair.element}</span>
                </div>
              );
            })}
          </div>
        </div>

        {/* Targets */}
        <div className="space-y-3">
          <p className="text-sm text-muted-foreground font-medium">Destinos:</p>
          <div className="space-y-2">
            {targets.map((target) => {
              const placedItemId = placements[target.id];
              const placedItem = placedItemId ? getItemById(placedItemId) : null;
              const isCorrectPlacement = showResult && placedItemId === target.id;
              const isWrongPlacement = showResult && placedItemId && placedItemId !== target.id;

              return (
                <div
                  key={target.id}
                  onDragOver={handleDragOver}
                  onDrop={(e) => handleDrop(e, target.id)}
                  className={cn(
                    "p-3 rounded-xl border-2 border-dashed min-h-[52px] transition-all duration-300",
                    !showResult && !placedItem && "border-border/50 bg-background/50",
                    !showResult && placedItem && "border-accent/50 bg-accent/10",
                    isCorrectPlacement && "border-primary bg-primary/20",
                    isWrongPlacement && "border-destructive bg-destructive/10"
                  )}
                >
                  <div className="flex items-center justify-between">
                    <span className="text-sm text-muted-foreground">{target.target}</span>
                    {placedItem && (
                      <span className={cn(
                        "text-sm font-medium flex items-center gap-2",
                        isCorrectPlacement && "text-primary",
                        isWrongPlacement && "text-destructive",
                        !showResult && "text-accent"
                      )}>
                        <ArrowRight className="w-4 h-4" />
                        {placedItem.element}
                        {isCorrectPlacement && <CheckCircle2 className="w-4 h-4" />}
                      </span>
                    )}
                  </div>
                </div>
              );
            })}
          </div>
        </div>
      </div>

      {showResult && (
        <div className={cn(
          "p-4 rounded-xl",
          isCorrect ? "bg-primary/10 border border-primary/30" : "bg-destructive/10 border border-destructive/30"
        )}>
          <p className={cn(
            "text-sm",
            isCorrect ? "text-primary" : "text-destructive"
          )}>
            {isCorrect ? activity.feedback : "Algunas ubicaciones no son correctas. ¡Inténtalo de nuevo!"}
          </p>
        </div>
      )}

      <div className="flex justify-end gap-3">
        {showResult && !isCorrect && (
          <Button variant="outline" onClick={handleRetry}>
            Intentar de nuevo
          </Button>
        )}
        {!showResult && (
          <Button 
            variant="accent" 
            onClick={handleSubmit}
            disabled={!allPlaced}
          >
            Comprobar respuesta
          </Button>
        )}
      </div>
    </div>
  );
};

import { useState } from "react";
import { CheckCircle2, Link2 } from "lucide-react";
import { Button } from "@/components/ui/button";
import { MatchingActivity } from "@/types/activities";
import { cn } from "@/lib/utils";

interface MatchingProps {
  activity: MatchingActivity;
  onComplete: (correct: boolean, points: number, badge?: string) => void;
}

export const Matching = ({ activity, onComplete }: MatchingProps) => {
  const [selectedTerm, setSelectedTerm] = useState<string | null>(null);
  const [connections, setConnections] = useState<Record<string, string>>({});
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);

  const [shuffledTerms] = useState(() => 
    [...activity.pairs].sort(() => Math.random() - 0.5)
  );
  const [shuffledMatches] = useState(() => 
    [...activity.pairs].sort(() => Math.random() - 0.5)
  );

  const handleTermClick = (termId: string) => {
    if (showResult) return;
    
    // If already connected, disconnect
    if (connections[termId]) {
      setConnections(prev => {
        const newConnections = { ...prev };
        delete newConnections[termId];
        return newConnections;
      });
      return;
    }
    
    setSelectedTerm(termId);
  };

  const handleMatchClick = (matchId: string) => {
    if (showResult || !selectedTerm) return;
    
    // Check if this match is already used
    const existingTerm = Object.keys(connections).find(t => connections[t] === matchId);
    if (existingTerm) {
      setConnections(prev => {
        const newConnections = { ...prev };
        delete newConnections[existingTerm];
        return newConnections;
      });
    }
    
    setConnections(prev => ({
      ...prev,
      [selectedTerm]: matchId
    }));
    setSelectedTerm(null);
  };

  const handleSubmit = () => {
    let allCorrect = true;
    activity.pairs.forEach(pair => {
      if (connections[pair.id] !== pair.id) {
        allCorrect = false;
      }
    });

    setIsCorrect(allCorrect);
    setShowResult(true);
    
    if (allCorrect) {
      setTimeout(() => onComplete(true, activity.points, activity.badge), 1500);
    }
  };

  const handleRetry = () => {
    setConnections({});
    setSelectedTerm(null);
    setShowResult(false);
    setIsCorrect(false);
  };

  const allConnected = Object.keys(connections).length === activity.pairs.length;

  const getConnectionColor = (termId: string) => {
    const colors = [
      "bg-accent text-accent-foreground",
      "bg-primary text-primary-foreground",
      "bg-[hsl(280,70%,50%)] text-white",
      "bg-[hsl(180,70%,40%)] text-white"
    ];
    const index = Object.keys(connections).indexOf(termId);
    return index >= 0 ? colors[index % colors.length] : "";
  };

  return (
    <div className="glass-card p-6 space-y-6">
      <div className="flex items-start gap-3">
        <div className="p-2 bg-primary/20 rounded-xl">
          <Link2 className="w-5 h-5 text-primary" />
        </div>
        <div>
          <span className="text-xs text-muted-foreground uppercase tracking-wide">Emparejamiento</span>
          <h4 className="font-display font-semibold text-foreground mt-1">{activity.instruction}</h4>
        </div>
      </div>

      <div className="grid md:grid-cols-2 gap-6">
        {/* Terms */}
        <div className="space-y-3">
          <p className="text-sm text-muted-foreground font-medium">Términos:</p>
          <div className="space-y-2">
            {shuffledTerms.map((pair) => {
              const isConnected = !!connections[pair.id];
              const isSelected = selectedTerm === pair.id;
              const isCorrectMatch = showResult && connections[pair.id] === pair.id;
              const isWrongMatch = showResult && connections[pair.id] && connections[pair.id] !== pair.id;

              return (
                <button
                  key={pair.id}
                  onClick={() => handleTermClick(pair.id)}
                  disabled={showResult}
                  className={cn(
                    "w-full text-left p-3 rounded-xl border-2 transition-all duration-300 flex items-center justify-between",
                    !showResult && !isConnected && !isSelected && "border-border/50 hover:border-accent/50",
                    !showResult && isSelected && "border-accent bg-accent/20",
                    !showResult && isConnected && "border-accent/50",
                    isCorrectMatch && "border-primary bg-primary/20",
                    isWrongMatch && "border-destructive bg-destructive/10",
                    showResult && "cursor-default"
                  )}
                >
                  <span className={cn(
                    "text-foreground",
                    isCorrectMatch && "text-primary font-medium"
                  )}>
                    {pair.term}
                  </span>
                  {isConnected && (
                    <span className={cn(
                      "w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold",
                      !showResult && getConnectionColor(pair.id),
                      isCorrectMatch && "bg-primary text-primary-foreground",
                      isWrongMatch && "bg-destructive text-destructive-foreground"
                    )}>
                      {isCorrectMatch ? <CheckCircle2 className="w-4 h-4" /> : Object.keys(connections).indexOf(pair.id) + 1}
                    </span>
                  )}
                </button>
              );
            })}
          </div>
        </div>

        {/* Matches */}
        <div className="space-y-3">
          <p className="text-sm text-muted-foreground font-medium">Definiciones:</p>
          <div className="space-y-2">
            {shuffledMatches.map((pair) => {
              const connectedTermId = Object.keys(connections).find(t => connections[t] === pair.id);
              const isConnected = !!connectedTermId;
              const isCorrectMatch = showResult && connectedTermId === pair.id;
              const isWrongMatch = showResult && connectedTermId && connectedTermId !== pair.id;

              return (
                <button
                  key={pair.id}
                  onClick={() => handleMatchClick(pair.id)}
                  disabled={showResult || !selectedTerm}
                  className={cn(
                    "w-full text-left p-3 rounded-xl border-2 transition-all duration-300 flex items-center gap-3",
                    !showResult && !isConnected && selectedTerm && "border-border/50 hover:border-accent/50 cursor-pointer",
                    !showResult && !isConnected && !selectedTerm && "border-border/50 cursor-default",
                    !showResult && isConnected && "border-accent/50",
                    isCorrectMatch && "border-primary bg-primary/20",
                    isWrongMatch && "border-destructive bg-destructive/10",
                    showResult && "cursor-default"
                  )}
                >
                  {isConnected && connectedTermId && (
                    <span className={cn(
                      "w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold shrink-0",
                      !showResult && getConnectionColor(connectedTermId),
                      isCorrectMatch && "bg-primary text-primary-foreground",
                      isWrongMatch && "bg-destructive text-destructive-foreground"
                    )}>
                      {isCorrectMatch ? <CheckCircle2 className="w-4 h-4" /> : Object.keys(connections).indexOf(connectedTermId) + 1}
                    </span>
                  )}
                  <span className={cn(
                    "text-foreground text-sm",
                    isCorrectMatch && "text-primary font-medium"
                  )}>
                    {pair.match}
                  </span>
                </button>
              );
            })}
          </div>
        </div>
      </div>

      {showResult && (
        <div className={cn(
          "p-4 rounded-xl",
          isCorrect ? "bg-primary/10 border border-primary/30" : "bg-destructive/10 border border-destructive/30"
        )}>
          <p className={cn(
            "text-sm",
            isCorrect ? "text-primary" : "text-destructive"
          )}>
            {isCorrect ? activity.feedback : "Algunas conexiones no son correctas. ¡Inténtalo de nuevo!"}
          </p>
        </div>
      )}

      <div className="flex justify-end gap-3">
        {showResult && !isCorrect && (
          <Button variant="outline" onClick={handleRetry}>
            Intentar de nuevo
          </Button>
        )}
        {!showResult && (
          <Button 
            variant="accent" 
            onClick={handleSubmit}
            disabled={!allConnected}
          >
            Comprobar respuesta
          </Button>
        )}
      </div>
    </div>
  );
};


import { useState } from "react";
import { CheckCircle2, XCircle, HelpCircle } from "lucide-react";
import { Button } from "@/components/ui/button";
import { QuizMultipleActivity, QuizTrueFalseActivity } from "@/types/activities";
import { cn } from "@/lib/utils";

interface QuizMultipleProps {
  activity: QuizMultipleActivity;
  onComplete: (correct: boolean, points: number, badge?: string) => void;
}

export const QuizMultiple = ({ activity, onComplete }: QuizMultipleProps) => {
  const [selectedOption, setSelectedOption] = useState<string | null>(null);
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);

  const handleSubmit = () => {
    if (!selectedOption) return;
    const option = activity.options.find(o => o.id === selectedOption);
    const correct = option?.isCorrect ?? false;
    setIsCorrect(correct);
    setShowResult(true);
    
    if (correct) {
      setTimeout(() => onComplete(true, activity.points, activity.badge), 1500);
    }
  };

  const handleRetry = () => {
    setSelectedOption(null);
    setShowResult(false);
    setIsCorrect(false);
  };

  const selectedFeedback = activity.options.find(o => o.id === selectedOption)?.feedback;

  return (
    <div className="glass-card p-6 space-y-6">
      <div className="flex items-start gap-3">
        <div className="p-2 bg-primary/20 rounded-xl">
          <HelpCircle className="w-5 h-5 text-primary" />
        </div>
        <div>
          <span className="text-xs text-muted-foreground uppercase tracking-wide">Selección Múltiple</span>
          <h4 className="font-display font-semibold text-foreground mt-1">{activity.question}</h4>
        </div>
      </div>

      <div className="space-y-3">
        {activity.options.map((option) => (
          <button
            key={option.id}
            onClick={() => !showResult && setSelectedOption(option.id)}
            disabled={showResult}
            className={cn(
              "w-full text-left p-4 rounded-xl border-2 transition-all duration-300",
              !showResult && selectedOption === option.id && "border-accent bg-accent/10",
              !showResult && selectedOption !== option.id && "border-border/50 hover:border-accent/50 hover:bg-secondary/50",
              showResult && option.isCorrect && "border-primary bg-primary/20",
              showResult && !option.isCorrect && selectedOption === option.id && "border-destructive bg-destructive/10",
              showResult && "cursor-default"
            )}
          >
            <div className="flex items-center justify-between">
              <span className={cn(
                "text-foreground",
                showResult && option.isCorrect && "text-primary font-medium"
              )}>
                {option.text}
              </span>
              {showResult && option.isCorrect && <CheckCircle2 className="w-5 h-5 text-primary" />}
              {showResult && !option.isCorrect && selectedOption === option.id && <XCircle className="w-5 h-5 text-destructive" />}
            </div>
          </button>
        ))}
      </div>

      {showResult && selectedFeedback && (
        <div className={cn(
          "p-4 rounded-xl",
          isCorrect ? "bg-primary/10 border border-primary/30" : "bg-destructive/10 border border-destructive/30"
        )}>
          <p className={cn(
            "text-sm",
            isCorrect ? "text-primary" : "text-destructive"
          )}>
            {selectedFeedback}
          </p>
        </div>
      )}

      <div className="flex justify-end gap-3">
        {showResult && !isCorrect && (
          <Button variant="outline" onClick={handleRetry}>
            Intentar de nuevo
          </Button>
        )}
        {!showResult && (
          <Button 
            variant="accent" 
            onClick={handleSubmit}
            disabled={!selectedOption}
          >
            Comprobar respuesta
          </Button>
        )}
      </div>
    </div>
  );
};

interface QuizTrueFalseProps {
  activity: QuizTrueFalseActivity;
  onComplete: (correct: boolean, points: number, badge?: string) => void;
}

export const QuizTrueFalse = ({ activity, onComplete }: QuizTrueFalseProps) => {
  const [selectedAnswer, setSelectedAnswer] = useState<boolean | null>(null);
  const [showResult, setShowResult] = useState(false);
  const [isCorrect, setIsCorrect] = useState(false);
  const [dragX, setDragX] = useState(0);
  const [isDragging, setIsDragging] = useState(false);
  const [startX, setStartX] = useState(0);

  const handleAnswer = (answer: boolean) => {
    if (showResult) return;
    setSelectedAnswer(answer);
    const correct = answer === activity.answer;
    setIsCorrect(correct);
    setShowResult(true);
    
    if (correct) {
      setTimeout(() => onComplete(true, activity.points, activity.badge), 1500);
    }
  };

  const handleRetry = () => {
    setSelectedAnswer(null);
    setShowResult(false);
    setIsCorrect(false);
    setDragX(0);
  };

  // Touch/Mouse drag handlers
  const handleDragStart = (clientX: number) => {
    if (showResult) return;
    setIsDragging(true);
    setStartX(clientX);
  };

  const handleDragMove = (clientX: number) => {
    if (!isDragging || showResult) return;
    const delta = clientX - startX;
    setDragX(Math.max(-150, Math.min(150, delta)));
  };

  const handleDragEnd = () => {
    if (!isDragging || showResult) return;
    setIsDragging(false);
    
    if (dragX > 80) {
      // Swiped right = Verdadero
      handleAnswer(true);
    } else if (dragX < -80) {
      // Swiped left = Falso
      handleAnswer(false);
    } else {
      setDragX(0);
    }
  };

  // Calculate visual effects based on drag
  const rotation = dragX / 10;
  const opacity = Math.abs(dragX) / 150;
  const showVerdadero = dragX > 30;
  const showFalso = dragX < -30;

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-start gap-3">
        <div className="p-2 bg-accent/20 rounded-xl">
          <HelpCircle className="w-5 h-5 text-accent" />
        </div>
        <div>
          <span className="text-xs text-muted-foreground uppercase tracking-wide">Verdadero o Falso</span>
          <p className="text-sm text-muted-foreground mt-1">Desliza la tarjeta o usa los botones</p>
        </div>
      </div>

      {/* Swipeable Card Container */}
      <div className="relative flex items-center justify-center min-h-[280px]">
        {/* Background indicators */}
        <div 
          className={cn(
            "absolute left-4 top-1/2 -translate-y-1/2 w-16 h-16 rounded-full flex items-center justify-center transition-all duration-200",
            showFalso ? "bg-destructive/30 scale-110" : "bg-destructive/10"
          )}
        >
          <span className={cn(
            "text-2xl font-bold transition-colors",
            showFalso ? "text-destructive" : "text-destructive/40"
          )}>F</span>
        </div>
        <div 
          className={cn(
            "absolute right-4 top-1/2 -translate-y-1/2 w-16 h-16 rounded-full flex items-center justify-center transition-all duration-200",
            showVerdadero ? "bg-primary/30 scale-110" : "bg-primary/10"
          )}
        >
          <span className={cn(
            "text-2xl font-bold transition-colors",
            showVerdadero ? "text-primary" : "text-primary/40"
          )}>V</span>
        </div>

        {/* Swipeable Card */}
        <div
          className={cn(
            "glass-card p-6 w-full max-w-md cursor-grab active:cursor-grabbing select-none transition-shadow duration-200",
            isDragging && "shadow-2xl",
            showResult && isCorrect && "border-primary/50 bg-primary/5",
            showResult && !isCorrect && "border-destructive/50 bg-destructive/5"
          )}
          style={{
            transform: showResult 
              ? `translateX(${isCorrect === (activity.answer === true) ? (activity.answer ? 50 : -50) : 0}px)` 
              : `translateX(${dragX}px) rotate(${rotation}deg)`,
            transition: isDragging ? 'none' : 'transform 0.3s ease-out'
          }}
          onMouseDown={(e) => handleDragStart(e.clientX)}
          onMouseMove={(e) => handleDragMove(e.clientX)}
          onMouseUp={handleDragEnd}
          onMouseLeave={() => isDragging && handleDragEnd()}
          onTouchStart={(e) => handleDragStart(e.touches[0].clientX)}
          onTouchMove={(e) => handleDragMove(e.touches[0].clientX)}
          onTouchEnd={handleDragEnd}
        >
          {/* Swipe indicators on card */}
          <div 
            className={cn(
              "absolute top-4 right-4 px-3 py-1 rounded-lg border-2 font-bold text-sm transition-opacity",
              "border-primary text-primary",
              showVerdadero && !showResult ? "opacity-100" : "opacity-0"
            )}
          >
            VERDADERO
          </div>
          <div 
            className={cn(
              "absolute top-4 left-4 px-3 py-1 rounded-lg border-2 font-bold text-sm transition-opacity",
              "border-destructive text-destructive",
              showFalso && !showResult ? "opacity-100" : "opacity-0"
            )}
          >
            FALSO
          </div>

          {/* Card content */}
          <div className="py-8 px-4 text-center">
            <h4 className="font-display text-xl font-semibold text-foreground leading-relaxed">
              {activity.statement}
            </h4>
          </div>

          {/* Result indicator */}
          {showResult && (
            <div className={cn(
              "absolute inset-0 flex items-center justify-center bg-background/80 rounded-2xl animate-fade-in"
            )}>
              <div className="text-center">
                {isCorrect ? (
                  <CheckCircle2 className="w-16 h-16 text-primary mx-auto mb-2" />
                ) : (
                  <XCircle className="w-16 h-16 text-destructive mx-auto mb-2" />
                )}
                <p className={cn(
                  "font-bold text-lg",
                  isCorrect ? "text-primary" : "text-destructive"
                )}>
                  {isCorrect ? "¡Correcto!" : "Incorrecto"}
                </p>
              </div>
            </div>
          )}
        </div>
      </div>

      {/* V/F Buttons */}
      <div className="flex justify-center gap-6">
        <button
          onClick={() => handleAnswer(false)}
          disabled={showResult}
          className={cn(
            "w-16 h-16 rounded-full border-4 flex items-center justify-center font-bold text-2xl transition-all duration-300",
            !showResult && "border-destructive/50 text-destructive hover:border-destructive hover:bg-destructive/10 hover:scale-110",
            showResult && selectedAnswer === false && !isCorrect && "border-destructive bg-destructive/20 text-destructive",
            showResult && selectedAnswer === false && isCorrect && "border-primary bg-primary/20 text-primary",
            showResult && selectedAnswer !== false && "border-muted text-muted-foreground opacity-50",
            showResult && activity.answer === false && selectedAnswer !== false && "border-primary/50 text-primary/50"
          )}
        >
          F
        </button>
        <button
          onClick={() => handleAnswer(true)}
          disabled={showResult}
          className={cn(
            "w-16 h-16 rounded-full border-4 flex items-center justify-center font-bold text-2xl transition-all duration-300",
            !showResult && "border-primary/50 text-primary hover:border-primary hover:bg-primary/10 hover:scale-110",
            showResult && selectedAnswer === true && isCorrect && "border-primary bg-primary/20 text-primary",
            showResult && selectedAnswer === true && !isCorrect && "border-destructive bg-destructive/20 text-destructive",
            showResult && selectedAnswer !== true && "border-muted text-muted-foreground opacity-50",
            showResult && activity.answer === true && selectedAnswer !== true && "border-primary/50 text-primary/50"
          )}
        >
          V
        </button>
      </div>

      {/* Feedback */}
      {showResult && (
        <div className={cn(
          "p-4 rounded-xl animate-fade-in",
          isCorrect ? "bg-primary/10 border border-primary/30" : "bg-destructive/10 border border-destructive/30"
        )}>
          <p className={cn(
            "text-sm",
            isCorrect ? "text-primary" : "text-destructive"
          )}>
            {activity.explanation}
          </p>
        </div>
      )}

      {/* Retry button */}
      {showResult && !isCorrect && (
        <div className="flex justify-center">
          <Button variant="outline" onClick={handleRetry}>
            Intentar de nuevo
          </Button>
        </div>
      )}
    </div>
  );
};


import { useEffect, useState } from "react";
import { Trophy, Star, Sparkles, X } from "lucide-react";
import { Button } from "@/components/ui/button";
import { cn } from "@/lib/utils";

interface RewardModalProps {
  isOpen: boolean;
  onClose: () => void;
  points: number;
  badge?: string;
  totalPoints: number;
}

export const RewardModal = ({ isOpen, onClose, points, badge, totalPoints }: RewardModalProps) => {
  const [showContent, setShowContent] = useState(false);
  const [showPoints, setShowPoints] = useState(false);
  const [showBadge, setShowBadge] = useState(false);

  useEffect(() => {
    if (isOpen) {
      setShowContent(true);
      setShowPoints(true);
      setShowBadge(true);
    }
  }, [isOpen]);

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center">
      {/* Backdrop */}
      <div 
        className="absolute inset-0 bg-background/80 backdrop-blur-md"
        onClick={onClose}
      />
      
      {/* Confetti-like particles */}
      <div className="absolute inset-0 overflow-hidden pointer-events-none">
        {[...Array(20)].map((_, i) => (
          <div
            key={i}
            className="absolute animate-float"
            style={{
              left: `${Math.random() * 100}%`,
              top: `${Math.random() * 100}%`,
              animationDelay: `${Math.random() * 2}s`,
              animationDuration: `${3 + Math.random() * 2}s`
            }}
          >
            <Sparkles 
              className="w-4 h-4 text-accent opacity-60" 
              style={{ transform: `rotate(${Math.random() * 360}deg)` }}
            />
          </div>
        ))}
      </div>

      {/* Modal */}
      <div className={cn(
        "relative z-10 glass-card border-accent/50 p-8 max-w-md w-full mx-4 text-center transition-all duration-500",
        showContent ? "scale-100 opacity-100" : "scale-90 opacity-0"
      )}>
        <button
          onClick={onClose}
          className="absolute top-4 right-4 p-2 text-muted-foreground hover:text-foreground transition-colors"
        >
          <X className="w-5 h-5" />
        </button>

        {/* Trophy Icon */}
        <div className="relative w-24 h-24 mx-auto mb-6">
          <div className="absolute inset-0 bg-gradient-to-br from-accent to-[hsl(28,85%,40%)] rounded-full blur-xl opacity-50 animate-pulse" />
          <div className="relative w-full h-full bg-gradient-to-br from-accent to-[hsl(28,85%,50%)] rounded-full flex items-center justify-center">
            <Trophy className="w-12 h-12 text-accent-foreground" />
          </div>
        </div>

        {/* Title */}
        <h2 className="font-display text-3xl font-bold text-foreground mb-2">
          ¡Felicitaciones!
        </h2>
        <p className="text-muted-foreground mb-8">
          Has completado la actividad correctamente
        </p>

        {/* Points */}
        <div className={cn(
          "transition-all duration-500 mb-6",
          showPoints ? "translate-y-0 opacity-100" : "translate-y-4 opacity-0"
        )}>
          <div className="inline-flex items-center gap-3 px-6 py-3 bg-primary/20 rounded-2xl border border-primary/30">
            <Star className="w-6 h-6 text-primary fill-primary" />
            <div className="text-left">
              <span className="text-3xl font-bold text-primary">+{points}</span>
              <p className="text-xs text-muted-foreground">puntos ganados</p>
            </div>
          </div>
        </div>

        {/* Badge */}
        {badge && (
          <div className={cn(
            "transition-all duration-500 mb-8",
            showBadge ? "translate-y-0 opacity-100" : "translate-y-4 opacity-0"
          )}>
            <div className="inline-flex flex-col items-center gap-2 px-6 py-4 bg-accent/10 rounded-2xl border border-accent/30">
              <span className="text-5xl">{badge}</span>
              <p className="text-sm text-accent font-medium">¡Nueva insignia!</p>
            </div>
          </div>
        )}

        {/* Total Points */}
        <div className="pt-4 border-t border-border/50 mb-6">
          <p className="text-sm text-muted-foreground">
            Puntos totales del curso: <span className="font-bold text-foreground">{totalPoints}</span>
          </p>
        </div>

        <Button variant="hero" size="lg" onClick={onClose} className="w-full">
          ¡Continuar!
        </Button>
      </div>
    </div>
  );
};


<p>Los murciélagos de Colombia incluyen especies que se alimentan de frutas, néctar e insectos y cumplen funciones clave para el equilibrio de los ecosistemas. Los murciélagos insectívoros consumen grandes cantidades de insectos voladores, incluidos mosquitos que pueden transmitir enfermedades, lo que tiene un impacto directo en la salud pública¹,². A su vez, los murciélagos frugívoros favorecen la dispersión de semillas y la recuperación de bosques degradados, mientras que los nectarívoros participan en la polinización de numerosas plantas, especialmente en ecosistemas tropicales de montaña.</p><p>No obstante, pese a estos beneficios, la percepción social suele centrarse en su posible papel como portadores de enfermedades. La relación entre murciélagos, insectos transmisores —como los mosquitos del género <em>Anopheles</em>— y las enfermedades humanas es compleja y está fuertemente influenciada por la destrucción de hábitats, la pérdida de barreras ecológicas y el aumento del contacto entre fauna silvestre y personas. En Colombia, además, la investigación y la educación formal han priorizado a los insectos de importancia médica, dejando en segundo plano el rol ecológico de los murciélagos que se alimentan de ellos¹,².</p><p><img src="http://127.0.0.1:8000/storage/vSrO2HbkMq1w3M0qhm0SMXl3yhz2XTAKLe8QnBvI.jpg" alt="El Saccopteryx antioquensis es end&eacute;mico de Colombia. Foto:Mauricio Cardona Ram&iacute;rez" data-id="vSrO2HbkMq1w3M0qhm0SMXl3yhz2XTAKLe8QnBvI.jpg"></p><p>A esto se suma que la pérdida de hábitat, la urbanización, el cierre de cuevas y el uso de plaguicidas reducen los recursos y refugios disponibles para los murciélagos, afectando su capacidad para brindar servicios ecosistémicos. En entornos urbanos, muchas colonias son eliminadas por miedo o desinformación, a pesar de que los murciélagos tropicales son sensibles a cambios de temperatura y humedad en sus refugios, lo que puede alterar su equilibrio energético y fisiológico. Frente a este panorama, las estrategias educativas activas, como las salidas de campo, han demostrado ser eficaces para mejorar la comprensión y promover el cuidado del entorno⁴, por lo que integrar a los murciélagos en estas experiencias puede ayudar a transformarlos de “animales peligrosos” en aliados fundamentales del ecosistema y la agricultura.</p>
